{"ast":null,"code":"var _jsxFileName = \"C:\\\\repos\\\\sofiahardcode\\\\udacity-fullstack-nanodegree-vm\\\\vagrant\\\\trivia_api\\\\frontend\\\\src\\\\components\\\\QuestionView.js\";\nimport React, { Component } from 'react';\nimport '../stylesheets/App.css';\nimport Question from './Question';\nimport Search from './Search';\nimport { getQuestions, getCategoryQuestions, searchQuestions, deleteQuestion } from '../api';\n\nclass QuestionView extends Component {\n  constructor() {\n    super();\n\n    this.getQuestions = () => {\n      const {\n        page\n      } = this.state;\n      getQuestions(page, this.perPage).then(result => {\n        this.setState({\n          questions: result.questions,\n          totalQuestions: result.total_questions,\n          categories: result.categories,\n          currentCategory: result.current_category\n        });\n      }).catch(() => {\n        alert('Unable to load questions. Please try your request again');\n      });\n    };\n\n    this.getByCategory = id => {\n      getCategoryQuestions(id).then(result => {\n        this.setState({\n          questions: result.questions,\n          totalQuestions: result.total_questions,\n          currentCategory: result.current_category\n        });\n      }).catch(() => {\n        alert('Unable to load questions. Please try your request again');\n      });\n    };\n\n    this.submitSearch = searchTerm => {\n      searchQuestions(searchTerm).then(result => {\n        this.setState({\n          questions: result.questions,\n          totalQuestions: result.total_questions,\n          currentCategory: result.current_category\n        });\n      }).catch(() => {\n        alert('Unable to load questions. Please try your request again');\n      });\n    };\n\n    this.questionAction = id => action => {\n      if (action === 'DELETE' && window.confirm('are you sure you want to delete the question?')) {\n        deleteQuestion(id).then(() => this.onDeleteQuestion(id)).catch(() => {\n          alert('Unable to load questions. Please try your request again');\n        });\n      }\n    };\n\n    this.onDeleteQuestion = id => {\n      const {\n        page,\n        questions\n      } = this.state;\n      const remainingQuestions = questions.filter(question => question.id !== id); // use the same page if there are some remaining questions or this is the first page, otherwise use the previous page\n\n      const nextPage = remainingQuestions.length > 0 || page - 1 < 0 ? page : page - 1;\n      this.setState({\n        page: nextPage\n      }, () => this.getQuestions());\n    };\n\n    this.perPage = 10;\n    this.state = {\n      questions: [],\n      page: 1,\n      totalQuestions: 0,\n      categories: {},\n      currentCategory: null\n    };\n  }\n\n  componentDidMount() {\n    this.getQuestions();\n  }\n\n  selectPage(num) {\n    this.setState({\n      page: num\n    }, () => this.getQuestions());\n  }\n\n  createPagination() {\n    let pageNumbers = [];\n    let maxPage = Math.ceil(this.state.totalQuestions / this.perPage);\n\n    for (let i = 1; i <= maxPage; i++) {\n      pageNumbers.push( /*#__PURE__*/React.createElement(\"span\", {\n        key: i,\n        className: `page-num ${i === this.state.page ? 'active' : ''}`,\n        onClick: () => this.selectPage(i),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 17\n        }\n      }, i));\n    }\n\n    return pageNumbers;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"question-view\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"categories-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      onClick: this.getQuestions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, \"Categories\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }\n    }, Object.keys(this.state.categories).map(id => /*#__PURE__*/React.createElement(\"li\", {\n      key: id,\n      onClick: () => this.getByCategory(id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 29\n      }\n    }, this.state.categories[id], /*#__PURE__*/React.createElement(\"img\", {\n      className: \"category\",\n      src: `${this.state.categories[id]}.svg`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 33\n      }\n    })))), /*#__PURE__*/React.createElement(Search, {\n      submitSearch: this.submitSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"questions-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }, \"Questions\"), this.state.questions.map(q => /*#__PURE__*/React.createElement(Question, {\n      key: q.id,\n      question: q.question,\n      answer: q.answer,\n      category: this.state.categories[q.category],\n      difficulty: q.difficulty,\n      questionAction: this.questionAction(q.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pagination-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }\n    }, this.createPagination())));\n  }\n\n}\n\nexport default QuestionView;","map":{"version":3,"sources":["C:/repos/sofiahardcode/udacity-fullstack-nanodegree-vm/vagrant/trivia_api/frontend/src/components/QuestionView.js"],"names":["React","Component","Question","Search","getQuestions","getCategoryQuestions","searchQuestions","deleteQuestion","QuestionView","constructor","page","state","perPage","then","result","setState","questions","totalQuestions","total_questions","categories","currentCategory","current_category","catch","alert","getByCategory","id","submitSearch","searchTerm","questionAction","action","window","confirm","onDeleteQuestion","remainingQuestions","filter","question","nextPage","length","componentDidMount","selectPage","num","createPagination","pageNumbers","maxPage","Math","ceil","i","push","render","Object","keys","map","q","answer","category","difficulty"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../stylesheets/App.css';\nimport Question from './Question';\nimport Search from './Search';\nimport { getQuestions, getCategoryQuestions, searchQuestions, deleteQuestion } from '../api';\n\nclass QuestionView extends Component {\n    constructor() {\n        super();\n        this.perPage = 10;\n        this.state = {\n            questions: [],\n            page: 1,\n            totalQuestions: 0,\n            categories: {},\n            currentCategory: null,\n        };\n    }\n\n    componentDidMount() {\n        this.getQuestions();\n    }\n\n    getQuestions = () => {\n        const { page } = this.state;\n\n        getQuestions(page, this.perPage)\n            .then((result) => {\n                this.setState({\n                    questions: result.questions,\n                    totalQuestions: result.total_questions,\n                    categories: result.categories,\n                    currentCategory: result.current_category\n                })\n            })\n            .catch(() => {\n                alert('Unable to load questions. Please try your request again');\n            });\n    };\n\n    selectPage(num) {\n        this.setState({page: num}, () => this.getQuestions());\n    }\n\n    createPagination() {\n        let pageNumbers = [];\n        let maxPage = Math.ceil(this.state.totalQuestions / this.perPage);\n\n        for (let i = 1; i <= maxPage; i++) {\n            pageNumbers.push(\n                <span\n                    key={i}\n                    className={`page-num ${i === this.state.page ? 'active' : ''}`}\n                    onClick={() => this.selectPage(i)}\n                >\n                    {i}\n                </span>\n            )\n        }\n        return pageNumbers;\n    }\n\n    getByCategory = (id) => {\n        getCategoryQuestions(id)\n            .then((result) => {\n                this.setState({\n                    questions: result.questions,\n                    totalQuestions: result.total_questions,\n                    currentCategory: result.current_category\n                })\n            })\n            .catch(() => {\n                alert('Unable to load questions. Please try your request again')\n            });\n    };\n\n    submitSearch = (searchTerm) => {\n        searchQuestions(searchTerm)\n            .then((result) => {\n                this.setState({\n                    questions: result.questions,\n                    totalQuestions: result.total_questions,\n                    currentCategory: result.current_category\n                })\n            })\n            .catch(() => {\n                alert('Unable to load questions. Please try your request again')\n            });\n    };\n\n    questionAction = (id) => (action) => {\n        if (action === 'DELETE' && window.confirm('are you sure you want to delete the question?')) {\n            deleteQuestion(id)\n                .then(() => this.onDeleteQuestion(id))\n                .catch(() => {\n                    alert('Unable to load questions. Please try your request again')\n                });\n        }\n    };\n\n    onDeleteQuestion = (id) => {\n        const { page, questions } = this.state;\n        const remainingQuestions = questions.filter((question) => question.id !== id);\n        // use the same page if there are some remaining questions or this is the first page, otherwise use the previous page\n        const nextPage = remainingQuestions.length > 0 || page - 1 < 0\n            ? page\n            : page - 1;\n\n        this.setState({\n            page: nextPage\n        }, () => this.getQuestions())\n    };\n\n    render() {\n        return (\n            <div className=\"question-view\">\n                <div className=\"categories-list\">\n                    <h2 onClick={this.getQuestions}>\n                        Categories\n                    </h2>\n\n                    <ul>\n                        {Object.keys(this.state.categories).map((id) => (\n                            <li\n                                key={id}\n                                onClick={() => this.getByCategory(id)}\n                            >\n                                {this.state.categories[id]}\n\n                                <img\n                                    className=\"category\"\n                                    src={`${this.state.categories[id]}.svg`}\n                                />\n                            </li>\n                        ))}\n                    </ul>\n\n                    <Search submitSearch={this.submitSearch}/>\n                </div>\n\n                <div className=\"questions-list\">\n                    <h2>Questions</h2>\n\n                    {this.state.questions.map((q) => (\n                        <Question\n                            key={q.id}\n                            question={q.question}\n                            answer={q.answer}\n                            category={this.state.categories[q.category]}\n                            difficulty={q.difficulty}\n                            questionAction={this.questionAction(q.id)}\n                        />\n                    ))}\n\n                    <div className=\"pagination-menu\">\n                        {this.createPagination()}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default QuestionView;\n"]},"metadata":{},"sourceType":"module"}